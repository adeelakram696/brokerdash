"use strict";(self.webpackChunkbroker_dashboard=self.webpackChunkbroker_dashboard||[]).push([[368],{1968:(e,t,a)=>{a.d(t,{A:()=>d});var s=a(6338),n=a(4414);const{useState:l,useEffect:i}=a(9950);const d=function(e){let{startSeconds:t,isReverse:a,limit:d,goalTime:c,onFinish:r=(()=>{}),updateTime:o=(()=>{})}=e;const[u,h]=l();return i((()=>{h(t)}),[t]),i((()=>{const e=setInterval((()=>{u>=0&&h((e=>a?e-1:e+1))}),1e3);return o(u),d===u&&(clearInterval(e),r()),()=>clearInterval(e)}),[u]),(0,n.jsx)("span",{style:c?{color:(0,s.ve)(u,c)}:{},children:(0,s.od)(u)})}},1340:(e,t,a)=>{a.d(t,{A:()=>h});var s=a(9950),n=a(4064),l=a(8738),i=a.n(l),d=a(640),c=a(8342),r=a(9398);const o={textStyle:"DataTable_textStyle__tKKSk",itemContainer:"DataTable_itemContainer__TESDP",rowPadding:"DataTable_rowPadding__Vb9z2",headerRow:"DataTable_headerRow__2iwcE",itemRow:"DataTable_itemRow__KQavJ",itemColumn:"DataTable_itemColumn__P-GQu",phoneIcon:"DataTable_phoneIcon__GNg47",newTag:"DataTable_newTag__-tMul"};var u=a(4414);const h=function(e){let{columns:t,data:a,highlightClass:l,newTagClass:h,hoverClass:_,board:m,disableClick:x,disableNewTag:g,callBackOnOpen:j=(()=>{})}=e;const[f,v]=(0,s.useState)(),[A,N]=(0,s.useState)();return(0,u.jsxs)(n.A,{className:o.textStyle,vertical:!0,children:[(0,u.jsx)(n.A,{justify:"space-between",className:o.headerContainer,children:t.map(((e,t)=>(0,u.jsx)(n.A,{className:i()(o.headerRow,o.rowPadding),flex:0===t?1.3:.75,justify:e.align,children:e.title},e.key)))}),(0,u.jsx)(n.A,{justify:"space-between",className:o.itemContainer,vertical:!0,children:a.map(((e,a)=>(0,u.jsx)(n.A,{onClick:x?()=>{}:()=>{var t;t=e.key,N(t),j(t),v(!0)},className:i()(o.itemRow,o.rowPadding,_,{[l]:e.isNew}),align:"center",children:t.map(((t,a)=>{var s;return(0,u.jsxs)(n.A,{className:o.itemColumn,flex:0===a?1:.6,justify:t.align,align:"center",children:[0===a?(0,u.jsx)("span",{className:o.phoneIcon,children:(0,u.jsx)(d.E,{color:e.isNew?"#FFF":void 0})}):null,null!==t&&void 0!==t&&t.render?null===t||void 0===t?void 0:t.render(e[t.dataIndex],e):null===(s=e[t.dataIndex])||void 0===s?void 0:s.substring(0,t.maxLength||20),e[t.dataIndex].length>30?"...":"",0===a&&e.isNew&&!g?(0,u.jsx)(n.A,{justify:"center",align:"center",className:i()(o.newTag,h),children:c.A.Cards.new}):null]},t.key)}))},"".concat(e.key,"-").concat(a))))}),f?(0,u.jsx)(r.A,{show:f,handleClose:()=>{N(""),v(!1)},leadId:A,board:m}):null]})}},8754:(e,t,a)=>{a.r(t),a.d(t,{default:()=>de});var s=a(5465),n=a(718),l=a(4064),i=a(8871),d=a(9950),c=a(4051),r=a(326),o=a(4159),u=a.n(o),h=a(859),_=a(2746),m=a(2056);const x="Legends_legends__wL+8a",g="Legends_legendColor__J+nH6";var j=a(4414);const f=function(e){let{data:t}=e;return(0,j.jsx)(l.A,{vertical:!0,className:x,justify:"center",children:Object.entries(t).map(((e,t)=>{let[a,s]=e;return(0,j.jsxs)(l.A,{justify:"space-between",children:[(0,j.jsxs)(l.A,{align:"center",children:[(0,j.jsx)("span",{className:g,style:{backgroundColor:r._o[t]}}),a]}),(0,j.jsx)(l.A,{children:s})]})}))})};var v=a(9961);const A=function(e){let{data:t,total:a}=e;const s=Object.entries(t).map((e=>{let[t,a]=e;return{type:t,value:a}}));if(s.length>0){const e={width:300,height:300,data:s,angleField:"value",colorField:"type",paddingRight:0,innerRadius:.8,scale:{color:{palette:r._o}},label:!1,legend:!1,tooltip:!1,annotations:[{type:"text",style:{text:"Total",x:"50%",y:"35%",textAlign:"center",fontSize:15,fontStyle:"bold"}},{type:"text",style:{text:a.toString(),x:"50%",y:"50%",textAlign:"center",fontSize:70,fontStyle:"bold"}}]};return(0,j.jsx)(v.A,{...e})}return null},N="NewLeadsChart_card__yzgVT",{RangePicker:w}=_.A;const T=function(){const{newLeads:e,dateRange:t,handleChangeDates:a}=(0,d.useContext)(i.r),[s,n]=(0,d.useState)({});return(0,d.useEffect)((()=>{if(!e)return;const t=null===e||void 0===e?void 0:e.reduce(((e,t)=>{const a=e,s=null===t.channel?"None":t.channel;return a[s]?a[s]+=1:a[s]=1,a}),{});n(t)}),[e]),(0,j.jsx)(m.A,{className:N,title:"New Leads",extra:(0,j.jsx)(w,{value:t,placeholder:"Select Date Range",onChange:a,allowClear:!1,maxDate:u()(),format:"MM-DD-YYYY"}),children:(0,j.jsxs)(l.A,{justify:"space-around",children:[(0,j.jsx)(l.A,{children:(0,j.jsx)(A,{data:s,total:e.length})}),(0,j.jsx)(f,{data:s})]})})};var b=a(1340),p=a(6338),y=a(8738),D=a.n(y);const C={card:"NewLeadsQueue_card__OJRHa",tableContainer:"NewLeadsQueue_tableContainer__8j8jS",avgQueTitle:"NewLeadsQueue_avgQueTitle__Df7mK",avgTitle:"NewLeadsQueue_avgTitle__CaO8d",avgTime:"NewLeadsQueue_avgTime__jvxef",red:"NewLeadsQueue_red__bU1Dh",orange:"NewLeadsQueue_orange__wfttd",green:"NewLeadsQueue_green__pAAHt"};var S=a(1968);const z=(e,t)=>[{title:"Lead Name",dataIndex:"name",key:"name",maxLength:30},{title:"Time in",dataIndex:"time",key:"time",align:"center",render:(e,a)=>a.isNew?(0,j.jsx)(S.A,{startSeconds:e,limit:300,goalTime:t}):(0,p.od)(e)},{title:"Reassigned in",dataIndex:"reassingTime",key:"reassingTime",align:"center",render:(t,a)=>a.isNew?(0,j.jsx)(S.A,{startSeconds:t,isReverse:!0,limit:0,onFinish:e}):(0,p.od)(t)},{title:"Assigned To",dataIndex:"assignedTo",key:"assignedTo",align:"center"}];const L=function(){const{newLeads:e,goalTime:t,getNewLeadsData:a,dateRange:s}=(0,d.useContext)(i.r),n=e.filter((e=>e.isNew&&!e.isAllPassedTimer)),c=e.filter((e=>e.isAllPassedTimer||e.isTouched)),r=c.reduce(((e,t)=>e+=t.timeToRespond),0)/c.length;return(0,j.jsx)(m.A,{className:C.card,title:"Current Untouched Leads in Que",children:(0,j.jsxs)(l.A,{flex:1,vertical:!0,children:[(0,j.jsx)("div",{className:C.tableContainer,children:(0,j.jsx)(b.A,{columns:z((()=>{a(s)}),t),data:n,disableClick:!0,disableNewTag:!0,board:"leads"})}),(0,j.jsxs)(l.A,{vertical:!0,children:[(0,j.jsx)(l.A,{className:C.avgQueTitle,children:"Average Que Time"}),(0,j.jsxs)(l.A,{flex:1,children:[(0,j.jsxs)(l.A,{flex:.5,vertical:!0,align:"center",children:[(0,j.jsx)(l.A,{className:C.avgTitle,children:"Actual for Today"}),(0,j.jsx)(l.A,{className:D()(C.avgTime,C[(0,p.ve)(r,t)]),children:c.length?(0,p.od)(r):"00:00"})]}),(0,j.jsxs)(l.A,{flex:.5,vertical:!0,align:"center",children:[(0,j.jsx)(l.A,{className:C.avgTitle,children:"Goal"}),(0,j.jsx)(l.A,{className:C.avgTime,children:(0,p.od)(t)})]})]})]})]})})};const k=function(){return(0,j.jsxs)(l.A,{children:[(0,j.jsx)(T,{}),(0,j.jsx)(L,{})]})},F="NewDealsSubmitted_card__wCE4g",P="NewDealsSubmitted_dealCount__px0pk",R="NewDealsSubmitted_dealsPercent__iKYAW",G="NewDealsSubmitted_dealsGoal__90kxT";const I=function(){const{newLeads:e,submittedDeals:t,dealGoal:a}=(0,d.useContext)(i.r),[s,n]=(0,d.useState)({});(0,d.useEffect)((()=>{if(!t)return;const e=null===t||void 0===t?void 0:t.reduce(((e,t)=>{const a=e,s=(0,p.MH)(t.column_values),n=null===s[r.zu.deals.channel]?"None":s[r.zu.deals.channel];return a[n]?a[n]+=1:a[n]=1,a}),{});n(e)}),[t]);const c=e.length>0?t.length/e.length*100:0,o=t.length/a*100;return(0,j.jsx)(m.A,{className:F,title:"New Deals Submitted",children:(0,j.jsxs)(l.A,{justify:"space-around",children:[(0,j.jsxs)(l.A,{vertical:!0,align:"center",children:[(0,j.jsx)(l.A,{className:P,children:t.length}),(0,j.jsx)(l.A,{className:R,children:"".concat(c.toFixed(2),"% of Leads")}),(0,j.jsxs)(l.A,{className:G,children:["Goal:"," ",o.toFixed(2),"%"]})]}),(0,j.jsx)(l.A,{children:(0,j.jsx)(f,{data:s})})]})})},E="LeadsWithOfferToPitch_card__r55zt",Q="LeadsWithOfferToPitch_dealCount__QR4e6",H="LeadsWithOfferToPitch_dealsGoal__wA+ks";const M=function(){const{submittedDeals:e}=(0,d.useContext)(i.r),t=e.filter((e=>"Offers Ready/Approved"===(0,p.MH)(e.column_values)[r.zu.deals.stage])),a=e.length>0?t.length/e.length*100:0;return(0,j.jsx)(m.A,{className:E,title:"Leads with offer to pitch",children:(0,j.jsxs)(l.A,{vertical:!0,align:"center",children:[(0,j.jsx)(l.A,{className:Q,children:t.length}),(0,j.jsxs)(l.A,{className:H,children:["(",a.toFixed(2),"% of Subs)"]})]})})},O="TotalDeclines_card__-vNnE",Y="TotalDeclines_dealCount__MY+xE",K="TotalDeclines_dealsGoal__St+b7";const q=function(){const{submittedDeals:e}=(0,d.useContext)(i.r),t=e.filter((e=>"DQ"===(0,p.MH)(e.column_values)[r.zu.deals.stage])),a=e.length>0?t.length/e.length*100:0;return(0,j.jsx)(m.A,{className:O,title:"Total Declines",children:(0,j.jsxs)(l.A,{vertical:!0,align:"center",children:[(0,j.jsx)(l.A,{className:Y,children:t.length}),(0,j.jsxs)(l.A,{className:K,children:["(",a.toFixed(2),"% of Subs)"]})]})})};var B=a(1397),W=a.n(B);const J="NewDealsPitched_card__zEEst",U="NewDealsPitched_dealCount__fxMZ6",V="NewDealsPitched_dealsPercent__ppbAe",X="NewDealsPitched_dealsGoal__Yo+i-";const Z=function(){const{submittedDeals:e,pitchedGoal:t}=(0,d.useContext)(i.r),[a,s]=(0,d.useState)({}),n=e.filter((e=>"v"===(0,p.MH)(e.column_values)[r.zu.deals.pitched]));(0,d.useEffect)((()=>{if(!n)return;const e=null===n||void 0===n?void 0:n.reduce(((e,t)=>{const a=e,s=(0,p.MH)(t.column_values),n=null===s[r.zu.deals.channel]?"None":s[r.zu.deals.channel];return a[n]?a[n]+=1:a[n]=1,a}),{});s(e)}),[e]);const c=e.length>0?n.length/e.length*100:0,o=n.length/t*100;return(0,j.jsx)(m.A,{className:J,title:"New Deals Pitched",children:(0,j.jsxs)(l.A,{justify:"space-around",children:[(0,j.jsxs)(l.A,{vertical:!0,align:"center",children:[(0,j.jsx)(l.A,{className:U,children:n.length}),(0,j.jsx)(l.A,{className:V,children:"".concat(c.toFixed(2),"% of Deals")}),(0,j.jsxs)(l.A,{className:X,children:["Goal:"," ",o.toFixed(2),"%"]})]}),(0,j.jsx)(l.A,{children:(0,j.jsx)(f,{data:a})})]})})},$="FundedDeals_card__YHQ+X",ee="FundedDeals_dealCount__+YXve",te="FundedDeals_dealsGoal__CCn2A";const ae=function(){const{submittedDeals:e}=(0,d.useContext)(i.r),t=e.filter((e=>e.subitems.find((e=>"Selected"===(0,p.MH)(e.column_values)[r.zu.subItem.status])))),a=e.length>0?t.length/e.length*100:0;return(0,j.jsx)(m.A,{className:$,title:"Funded",children:(0,j.jsxs)(l.A,{vertical:!0,align:"center",children:[(0,j.jsx)(l.A,{className:ee,children:t.length}),(0,j.jsxs)(l.A,{className:te,children:["(",a.toFixed(2),"% of Subs)"]})]})})},se="FundedDealsAmount_card__qgB3J",ne="FundedDealsAmount_dealCount__mqUDs";const le=function(){const{submittedDeals:e}=(0,d.useContext)(i.r),t=e.reduce(((e,t)=>{let a=e;const s=t.subitems.find((e=>"Selected"===(0,p.MH)(e.column_values)[r.zu.subItem.status]));if(s){const e=(0,p.MH)(s.column_values);a+=Number(e[r.zu.subItem.funding_amount])}return a}),0);return(0,j.jsx)(m.A,{className:se,title:"Funded Amount",children:(0,j.jsx)(l.A,{vertical:!0,align:"center",children:(0,j.jsxs)(l.A,{className:ne,children:["$",(0,p.qC)(t)]})})})};const ie=function(){let e;const[t,a]=(0,d.useState)({}),[s,n]=(0,d.useState)([]),[o,_]=(0,d.useState)([]),[m,x]=(0,d.useState)([u()(),u()()]),g=(0,d.useRef)(),f=async e=>{const t=function(e){const t=e.map((e=>{let t=W().mapKeys(e.column_values,"id");t=W().mapValues(t,"text");const a=(0,p.oG)(e.column_values,r.zu.leads.last_lead_assigned),s=(0,p.oG)(e.column_values,r.zu.leads.creation_date),n=(0,p.oG)(e.column_values,r.zu.leads.new_lead_or_touched),l=(0,p.oG)(e.column_values,r.zu.leads.minutes_5),i="Not Touched yet"===t[r.zu.leads.new_lead_or_touched],d="Passed through all options"===t[r.zu.leads.new_lead_or_touched],c=null!==t[r.zu.leads.minutes_5],o="Touched"===t[r.zu.leads.new_lead_or_touched];let h=0;i&&null!==a&&void 0!==a&&a.changed_at&&(h=u()().diff(u()(null===a||void 0===a?void 0:a.changed_at),"seconds"));let _=0;return c?_=u()(null===l||void 0===l?void 0:l.changed_at).diff(u()(null===s||void 0===s?void 0:s.changed_at),"seconds"):o&&(_=u()(null===n||void 0===n?void 0:n.changed_at).diff(u()(null===s||void 0===s?void 0:s.changed_at),"seconds")),{key:e.id,name:e.name,stage:t[r.zu.leads.stage],isNew:i,isAllPassed:d,isAllPassedTimer:c,isTouched:o,reassingTime:h<=300?300-h:0,time:h,queueTime:t[r.zu.leads.time_in_the_que],channel:t[r.zu.leads.channel],timeToRespond:_,assignedTo:t[r.zu.leads.sales_rep]||"-"}}));return W().sortBy(t,"isNew").reverse()}(await(0,c.Hp)(e));n(t)},v=async e=>{const t=await(0,c.Wr)(e);_(t)},A=async()=>{const e=await(0,c.C)();a(e)};return(0,d.useEffect)((()=>(A(),e=h.A.listen("events",A),()=>{e&&e()})),[]),(0,d.useEffect)((()=>{g.current=[u()(),u()()],f(m);const e=setInterval((()=>{f(g.current)}),1e3*r._K.performanceRefetchTime);return()=>{clearInterval(e)}}),[]),(0,d.useEffect)((()=>{v(m);const e=setInterval((()=>{v(g.current)}),1e3*r._K.performanceRefetchTime);return()=>{clearInterval(e)}}),[]),(0,j.jsx)(i.r.Provider,{value:{goalTime:+t[r.zu.metrics.leadGoal],dealGoal:+t[r.zu.metrics.leadSubmissionGoal],pitchedGoal:+t[r.zu.metrics.dealPitchGoal],newLeads:s,submittedDeals:o,dateRange:m,getNewLeadsData:f,getSubmittedDeals:v,handleChangeDates:e=>{x(e),f(e),v(e),g.current=e}},children:(0,j.jsxs)(l.A,{justify:"center",align:"center",vertical:!0,children:[(0,j.jsx)(k,{}),(0,j.jsxs)(l.A,{children:[(0,j.jsx)(l.A,{children:(0,j.jsx)(I,{})}),(0,j.jsx)(l.A,{children:(0,j.jsx)(M,{})}),(0,j.jsx)(l.A,{children:(0,j.jsx)(q,{})})]}),(0,j.jsxs)(l.A,{children:[(0,j.jsx)(l.A,{children:(0,j.jsx)(Z,{})}),(0,j.jsx)(l.A,{children:(0,j.jsx)(ae,{})}),(0,j.jsx)(l.A,{children:(0,j.jsx)(le,{})})]})]})})};const de=function(){return(0,j.jsx)(s.Ay,{theme:{token:{fontFamily:"Poppins"},components:{Layout:{bodyBg:"#E1EFF2",headerBg:"#E1EFF2"}}},children:(0,j.jsxs)(n.A,{style:{padding:"0 8px 24px"},children:[(0,j.jsx)(ie,{})," "]})})}}}]);