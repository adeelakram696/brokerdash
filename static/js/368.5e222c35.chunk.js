"use strict";(self.webpackChunkbroker_dashboard=self.webpackChunkbroker_dashboard||[]).push([[368],{1968:(e,t,a)=>{a.d(t,{A:()=>d});var s=a(6338),n=a(4414);const{useState:l,useEffect:i}=a(9950);const d=function(e){let{startSeconds:t,isReverse:a,limit:d,goalTime:c,onFinish:r=(()=>{}),updateTime:o=(()=>{})}=e;const[u,h]=l();return i((()=>{h(t)}),[t]),i((()=>{const e=setInterval((()=>{u>=0&&h((e=>a?e-1:e+1))}),1e3);return o(u),d===u&&(clearInterval(e),r()),()=>clearInterval(e)}),[u]),(0,n.jsx)("span",{style:c?{color:(0,s.ve)(u,c)}:{},children:(0,s.od)(u)})}},1340:(e,t,a)=>{a.d(t,{A:()=>h});var s=a(9950),n=a(4064),l=a(8738),i=a.n(l),d=a(640),c=a(8342),r=a(9398);const o={textStyle:"DataTable_textStyle__tKKSk",itemContainer:"DataTable_itemContainer__TESDP",rowPadding:"DataTable_rowPadding__Vb9z2",headerRow:"DataTable_headerRow__2iwcE",itemRow:"DataTable_itemRow__KQavJ",itemColumn:"DataTable_itemColumn__P-GQu",phoneIcon:"DataTable_phoneIcon__GNg47",newTag:"DataTable_newTag__-tMul"};var u=a(4414);const h=function(e){let{columns:t,data:a,highlightClass:l,newTagClass:h,hoverClass:_,board:m,disableClick:x,disableNewTag:g,callBackOnOpen:j=(()=>{})}=e;const[f,v]=(0,s.useState)(),[A,N]=(0,s.useState)();return(0,u.jsxs)(n.A,{className:o.textStyle,vertical:!0,children:[(0,u.jsx)(n.A,{justify:"space-between",className:o.headerContainer,children:t.map(((e,t)=>(0,u.jsx)(n.A,{className:i()(o.headerRow,o.rowPadding),flex:0===t?1.3:.75,justify:e.align,children:e.title},e.key)))}),(0,u.jsx)(n.A,{justify:"space-between",className:o.itemContainer,vertical:!0,children:a.map(((e,a)=>(0,u.jsx)(n.A,{onClick:x?()=>{}:()=>{var t;t=e.key,N(t),j(t),v(!0)},className:i()(o.itemRow,o.rowPadding,_,{[l]:e.isNew}),align:"center",children:t.map(((t,a)=>{var s;return(0,u.jsxs)(n.A,{className:o.itemColumn,flex:0===a?1:.6,justify:t.align,align:"center",children:[0===a?(0,u.jsx)("span",{className:o.phoneIcon,children:(0,u.jsx)(d.E,{color:e.isNew?"#FFF":void 0})}):null,null!==t&&void 0!==t&&t.render?null===t||void 0===t?void 0:t.render(e[t.dataIndex],e):null===(s=e[t.dataIndex])||void 0===s?void 0:s.substring(0,t.maxLength||20),e[t.dataIndex].length>30?"...":"",0===a&&e.isNew&&!g?(0,u.jsx)(n.A,{justify:"center",align:"center",className:i()(o.newTag,h),children:c.A.Cards.new}):null]},t.key)}))},"".concat(e.key,"-").concat(a))))}),f?(0,u.jsx)(r.A,{show:f,handleClose:()=>{N(""),v(!1)},leadId:A,board:m}):null]})}},8754:(e,t,a)=>{a.r(t),a.d(t,{default:()=>le});var s=a(4064),n=a(8871),l=a(9950),i=a(4051),d=a(326),c=a(4159),r=a.n(c),o=a(859),u=a(2746),h=a(2056);const _="Legends_legends__wL+8a",m="Legends_legendColor__J+nH6";var x=a(4414);const g=function(e){let{data:t}=e;return(0,x.jsx)(s.A,{vertical:!0,className:_,justify:"center",children:Object.entries(t).map(((e,t)=>{let[a,n]=e;return(0,x.jsxs)(s.A,{justify:"space-between",children:[(0,x.jsxs)(s.A,{align:"center",children:[(0,x.jsx)("span",{className:m,style:{backgroundColor:d._o[t]}}),a]}),(0,x.jsx)(s.A,{children:n})]})}))})};var j=a(9961);const f=function(e){let{data:t,total:a}=e;const s=Object.entries(t).map((e=>{let[t,a]=e;return{type:t,value:a}}));if(s.length>0){const e={width:300,height:300,data:s,angleField:"value",colorField:"type",paddingRight:0,innerRadius:.8,scale:{color:{palette:d._o}},label:!1,legend:!1,tooltip:!1,annotations:[{type:"text",style:{text:"Total",x:"50%",y:"35%",textAlign:"center",fontSize:15,fontStyle:"bold"}},{type:"text",style:{text:a.toString(),x:"50%",y:"50%",textAlign:"center",fontSize:70,fontStyle:"bold"}}]};return(0,x.jsx)(j.A,{...e})}return null},v="NewLeadsChart_card__yzgVT",{RangePicker:A}=u.A;const N=function(){const{newLeads:e,dateRange:t,handleChangeDates:a}=(0,l.useContext)(n.r),[i,d]=(0,l.useState)({});return(0,l.useEffect)((()=>{if(!e)return;const t=null===e||void 0===e?void 0:e.reduce(((e,t)=>{const a=e,s=null===t.channel?"None":t.channel;return a[s]?a[s]+=1:a[s]=1,a}),{});d(t)}),[e]),(0,x.jsx)(h.A,{className:v,title:"New Leads",extra:(0,x.jsx)(A,{value:t,placeholder:"Select Date Range",onChange:a,allowClear:!1,maxDate:r()(),format:"MM-DD-YYYY"}),children:(0,x.jsxs)(s.A,{justify:"space-around",children:[(0,x.jsx)(s.A,{children:(0,x.jsx)(f,{data:i,total:e.length})}),(0,x.jsx)(g,{data:i})]})})};var w=a(1340),T=a(6338),b=a(8738),p=a.n(b);const D={card:"NewLeadsQueue_card__OJRHa",tableContainer:"NewLeadsQueue_tableContainer__8j8jS",avgQueTitle:"NewLeadsQueue_avgQueTitle__Df7mK",avgTitle:"NewLeadsQueue_avgTitle__CaO8d",avgTime:"NewLeadsQueue_avgTime__jvxef",red:"NewLeadsQueue_red__bU1Dh",orange:"NewLeadsQueue_orange__wfttd",green:"NewLeadsQueue_green__pAAHt"};var C=a(1968);const y=(e,t)=>[{title:"Lead Name",dataIndex:"name",key:"name",maxLength:30},{title:"Time in",dataIndex:"time",key:"time",align:"center",render:(e,a)=>a.isNew?(0,x.jsx)(C.A,{startSeconds:e,limit:300,goalTime:t}):(0,T.od)(e)},{title:"Reassigned in",dataIndex:"reassingTime",key:"reassingTime",align:"center",render:(t,a)=>a.isNew?(0,x.jsx)(C.A,{startSeconds:t,isReverse:!0,limit:0,onFinish:e}):(0,T.od)(t)},{title:"Assigned To",dataIndex:"assignedTo",key:"assignedTo",align:"center"}];const S=function(){const{newLeads:e,goalTime:t,getNewLeadsData:a,dateRange:i}=(0,l.useContext)(n.r),d=e.filter((e=>e.isNew&&!e.isAllPassedTimer)),c=e.filter((e=>e.isAllPassedTimer||e.isTouched)),r=c.reduce(((e,t)=>e+=t.timeToRespond),0)/c.length;return(0,x.jsx)(h.A,{className:D.card,title:"Current Untouched Leads in Que",children:(0,x.jsxs)(s.A,{flex:1,vertical:!0,children:[(0,x.jsx)("div",{className:D.tableContainer,children:(0,x.jsx)(w.A,{columns:y((()=>{a(i)}),t),data:d,disableClick:!0,disableNewTag:!0,board:"leads"})}),(0,x.jsxs)(s.A,{vertical:!0,children:[(0,x.jsx)(s.A,{className:D.avgQueTitle,children:"Average Que Time"}),(0,x.jsxs)(s.A,{flex:1,children:[(0,x.jsxs)(s.A,{flex:.5,vertical:!0,align:"center",children:[(0,x.jsx)(s.A,{className:D.avgTitle,children:"Actual for Today"}),(0,x.jsx)(s.A,{className:p()(D.avgTime,D[(0,T.ve)(r,t)]),children:c.length?(0,T.od)(r):"00:00"})]}),(0,x.jsxs)(s.A,{flex:.5,vertical:!0,align:"center",children:[(0,x.jsx)(s.A,{className:D.avgTitle,children:"Goal"}),(0,x.jsx)(s.A,{className:D.avgTime,children:(0,T.od)(t)})]})]})]})]})})};const z=function(){return(0,x.jsxs)(s.A,{children:[(0,x.jsx)(N,{}),(0,x.jsx)(S,{})]})},L="NewDealsSubmitted_card__wCE4g",k="NewDealsSubmitted_dealCount__px0pk",P="NewDealsSubmitted_dealsPercent__iKYAW",R="NewDealsSubmitted_dealsGoal__90kxT";const F=function(){const{newLeads:e,submittedDeals:t,dealGoal:a}=(0,l.useContext)(n.r),[i,c]=(0,l.useState)({});(0,l.useEffect)((()=>{if(!t)return;const e=null===t||void 0===t?void 0:t.reduce(((e,t)=>{const a=e,s=(0,T.MH)(t.column_values),n=null===s[d.zu.deals.channel]?"None":s[d.zu.deals.channel];return a[n]?a[n]+=1:a[n]=1,a}),{});c(e)}),[t]);const r=e.length>0?t.length/e.length*100:0,o=t.length/a*100;return(0,x.jsx)(h.A,{className:L,title:"New Deals Submitted",children:(0,x.jsxs)(s.A,{justify:"space-around",children:[(0,x.jsxs)(s.A,{vertical:!0,align:"center",children:[(0,x.jsx)(s.A,{className:k,children:t.length}),(0,x.jsx)(s.A,{className:P,children:"".concat(r.toFixed(2),"% of Leads")}),(0,x.jsxs)(s.A,{className:R,children:["Goal:"," ",o.toFixed(2),"%"]})]}),(0,x.jsx)(s.A,{children:(0,x.jsx)(g,{data:i})})]})})},G="LeadsWithOfferToPitch_card__r55zt",I="LeadsWithOfferToPitch_dealCount__QR4e6",Q="LeadsWithOfferToPitch_dealsGoal__wA+ks";const E=function(){const{submittedDeals:e}=(0,l.useContext)(n.r),t=e.filter((e=>"Offers Ready/Approved"===(0,T.MH)(e.column_values)[d.zu.deals.stage])),a=e.length>0?t.length/e.length*100:0;return(0,x.jsx)(h.A,{className:G,title:"Leads with offer to pitch",children:(0,x.jsxs)(s.A,{vertical:!0,align:"center",children:[(0,x.jsx)(s.A,{className:I,children:t.length}),(0,x.jsxs)(s.A,{className:Q,children:["(",a.toFixed(2),"% of Subs)"]})]})})},H="TotalDeclines_card__-vNnE",M="TotalDeclines_dealCount__MY+xE",O="TotalDeclines_dealsGoal__St+b7";const Y=function(){const{submittedDeals:e}=(0,l.useContext)(n.r),t=e.filter((e=>"DQ"===(0,T.MH)(e.column_values)[d.zu.deals.stage])),a=e.length>0?t.length/e.length*100:0;return(0,x.jsx)(h.A,{className:H,title:"Total Declines",children:(0,x.jsxs)(s.A,{vertical:!0,align:"center",children:[(0,x.jsx)(s.A,{className:M,children:t.length}),(0,x.jsxs)(s.A,{className:O,children:["(",a.toFixed(2),"% of Subs)"]})]})})};var K=a(1397),q=a.n(K);const W="NewDealsPitched_card__zEEst",J="NewDealsPitched_dealCount__fxMZ6",B="NewDealsPitched_dealsPercent__ppbAe",U="NewDealsPitched_dealsGoal__Yo+i-";const V=function(){const{submittedDeals:e,pitchedGoal:t}=(0,l.useContext)(n.r),[a,i]=(0,l.useState)({}),c=e.filter((e=>"v"===(0,T.MH)(e.column_values)[d.zu.deals.pitched]));(0,l.useEffect)((()=>{if(!c)return;const e=null===c||void 0===c?void 0:c.reduce(((e,t)=>{const a=e,s=(0,T.MH)(t.column_values),n=null===s[d.zu.deals.channel]?"None":s[d.zu.deals.channel];return a[n]?a[n]+=1:a[n]=1,a}),{});i(e)}),[e]);const r=e.length>0?c.length/e.length*100:0,o=c.length/t*100;return(0,x.jsx)(h.A,{className:W,title:"New Deals Pitched",children:(0,x.jsxs)(s.A,{justify:"space-around",children:[(0,x.jsxs)(s.A,{vertical:!0,align:"center",children:[(0,x.jsx)(s.A,{className:J,children:c.length}),(0,x.jsx)(s.A,{className:B,children:"".concat(r.toFixed(2),"% of Deals")}),(0,x.jsxs)(s.A,{className:U,children:["Goal:"," ",o.toFixed(2),"%"]})]}),(0,x.jsx)(s.A,{children:(0,x.jsx)(g,{data:a})})]})})},X="FundedDeals_card__YHQ+X",Z="FundedDeals_dealCount__+YXve",$="FundedDeals_dealsGoal__CCn2A";const ee=function(){const{submittedDeals:e}=(0,l.useContext)(n.r),t=e.filter((e=>e.subitems.find((e=>"Selected"===(0,T.MH)(e.column_values)[d.zu.subItem.status])))),a=e.length>0?t.length/e.length*100:0;return(0,x.jsx)(h.A,{className:X,title:"Funded",children:(0,x.jsxs)(s.A,{vertical:!0,align:"center",children:[(0,x.jsx)(s.A,{className:Z,children:t.length}),(0,x.jsxs)(s.A,{className:$,children:["(",a.toFixed(2),"% of Subs)"]})]})})},te="FundedDealsAmount_card__qgB3J",ae="FundedDealsAmount_dealCount__mqUDs";const se=function(){const{submittedDeals:e}=(0,l.useContext)(n.r),t=e.reduce(((e,t)=>{let a=e;const s=t.subitems.find((e=>"Selected"===(0,T.MH)(e.column_values)[d.zu.subItem.status]));if(s){const e=(0,T.MH)(s.column_values);a+=Number(e[d.zu.subItem.funding_amount])}return a}),0);return(0,x.jsx)(h.A,{className:te,title:"Funded Amount",children:(0,x.jsx)(s.A,{vertical:!0,align:"center",children:(0,x.jsxs)(s.A,{className:ae,children:["$",(0,T.qC)(t)]})})})};const ne=function(){let e;const[t,a]=(0,l.useState)({}),[c,u]=(0,l.useState)([]),[h,_]=(0,l.useState)([]),[m,g]=(0,l.useState)([r()(),r()()]),j=(0,l.useRef)(),f=async e=>{const t=function(e){const t=e.map((e=>{let t=q().mapKeys(e.column_values,"id");t=q().mapValues(t,"text");const a=(0,T.oG)(e.column_values,d.zu.leads.last_lead_assigned),s=(0,T.oG)(e.column_values,d.zu.leads.creation_date),n=(0,T.oG)(e.column_values,d.zu.leads.new_lead_or_touched),l=(0,T.oG)(e.column_values,d.zu.leads.minutes_5),i="Not Touched yet"===t[d.zu.leads.new_lead_or_touched],c="Passed through all options"===t[d.zu.leads.new_lead_or_touched],o=null!==t[d.zu.leads.minutes_5],u="Touched"===t[d.zu.leads.new_lead_or_touched];let h=0;i&&null!==a&&void 0!==a&&a.changed_at&&(h=r()().diff(r()(null===a||void 0===a?void 0:a.changed_at),"seconds"));let _=0;return o?_=r()(null===l||void 0===l?void 0:l.changed_at).diff(r()(null===s||void 0===s?void 0:s.changed_at),"seconds"):u&&(_=r()(null===n||void 0===n?void 0:n.changed_at).diff(r()(null===s||void 0===s?void 0:s.changed_at),"seconds")),{key:e.id,name:e.name,stage:t[d.zu.leads.stage],isNew:i,isAllPassed:c,isAllPassedTimer:o,isTouched:u,reassingTime:h<=300?300-h:0,time:h,queueTime:t[d.zu.leads.time_in_the_que],channel:t[d.zu.leads.channel],timeToRespond:_,assignedTo:t[d.zu.leads.sales_rep]||"-"}}));return q().sortBy(t,"isNew").reverse()}(await(0,i.Hp)(e));u(t)},v=async e=>{const t=await(0,i.Wr)(e);_(t)},A=async()=>{const e=await(0,i.C)();a(e)};return(0,l.useEffect)((()=>(A(),e=o.A.listen("events",A),()=>{e&&e()})),[]),(0,l.useEffect)((()=>{j.current=[r()(),r()()],f(m);const e=setInterval((()=>{f(j.current)}),1e3*d._K.performanceRefetchTime);return()=>{clearInterval(e)}}),[]),(0,l.useEffect)((()=>{v(m);const e=setInterval((()=>{v(j.current)}),1e3*d._K.performanceRefetchTime);return()=>{clearInterval(e)}}),[]),(0,x.jsx)(n.r.Provider,{value:{goalTime:+t[d.zu.metrics.leadGoal],dealGoal:+t[d.zu.metrics.leadSubmissionGoal],pitchedGoal:+t[d.zu.metrics.dealPitchGoal],newLeads:c,submittedDeals:h,dateRange:m,getNewLeadsData:f,getSubmittedDeals:v,handleChangeDates:e=>{g(e),f(e),v(e),j.current=e}},children:(0,x.jsxs)(s.A,{justify:"center",align:"center",vertical:!0,children:[(0,x.jsx)(z,{}),(0,x.jsxs)(s.A,{children:[(0,x.jsx)(s.A,{children:(0,x.jsx)(F,{})}),(0,x.jsx)(s.A,{children:(0,x.jsx)(E,{})}),(0,x.jsx)(s.A,{children:(0,x.jsx)(Y,{})})]}),(0,x.jsxs)(s.A,{children:[(0,x.jsx)(s.A,{children:(0,x.jsx)(V,{})}),(0,x.jsx)(s.A,{children:(0,x.jsx)(ee,{})}),(0,x.jsx)(s.A,{children:(0,x.jsx)(se,{})})]})]})})};const le=function(){return(0,x.jsx)(ne,{})}}}]);