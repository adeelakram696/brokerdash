"use strict";(self.webpackChunkbroker_dashboard=self.webpackChunkbroker_dashboard||[]).push([[99],{4099:(e,t,n)=>{n.r(t),n.d(t,{default:()=>we});var a=n(5465),r=n(718),o=n(2746),c=n(4064),i=n(2612),s=n(9950),l=n(8738),d=n.n(l),u=n(7090),p=n(1929),m=n(6191),g=n(5741),f=n(5656),h=n(9415),v=n(183);const b=s.createContext({});var y=n(7409),x=n(5343),j=n(2672),S=n(1874);const C=e=>{const{antCls:t,componentCls:n,iconCls:a,avatarBg:r,avatarColor:o,containerSize:c,containerSizeLG:i,containerSizeSM:s,textFontSize:l,textFontSizeLG:d,textFontSizeSM:u,borderRadius:p,borderRadiusLG:m,borderRadiusSM:g,lineWidth:f,lineType:h}=e,v=(e,t,r)=>({width:e,height:e,borderRadius:"50%",["&".concat(n,"-square")]:{borderRadius:r},["&".concat(n,"-icon")]:{fontSize:t,["> ".concat(a)]:{margin:0}}});return{[n]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,x.dF)(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:o,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:r,border:"".concat((0,y.zA)(f)," ").concat(h," transparent"),"&-image":{background:"transparent"},["".concat(t,"-image-img")]:{display:"block"}}),v(c,l,p)),{"&-lg":Object.assign({},v(i,d,m)),"&-sm":Object.assign({},v(s,u,g)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},O=e=>{const{componentCls:t,groupBorderColor:n,groupOverlapping:a,groupSpace:r}=e;return{["".concat(t,"-group")]:{display:"inline-flex",["".concat(t)]:{borderColor:n},"> *:not(:first-child)":{marginInlineStart:a}},["".concat(t,"-group-popover")]:{["".concat(t," + ").concat(t)]:{marginInlineStart:r}}}},E=(0,j.OF)("Avatar",(e=>{const{colorTextLightSolid:t,colorTextPlaceholder:n}=e,a=(0,S.h1)(e,{avatarBg:n,avatarColor:t});return[C(a),O(a)]}),(e=>{const{controlHeight:t,controlHeightLG:n,controlHeightSM:a,fontSize:r,fontSizeLG:o,fontSizeXL:c,fontSizeHeading3:i,marginXS:s,marginXXS:l,colorBorderBg:d}=e;return{containerSize:t,containerSizeLG:n,containerSizeSM:a,textFontSize:Math.round((o+c)/2),textFontSizeLG:i,textFontSizeSM:r,groupSpace:l,groupOverlapping:-s,groupBorderColor:d}}));var w=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const _=(e,t)=>{const[n,a]=s.useState(1),[r,o]=s.useState(!1),[c,i]=s.useState(!0),l=s.useRef(null),y=s.useRef(null),x=(0,p.K4)(t,l),{getPrefixCls:j,avatar:S}=s.useContext(g.QO),C=s.useContext(b),O=()=>{if(!y.current||!l.current)return;const t=y.current.offsetWidth,n=l.current.offsetWidth;if(0!==t&&0!==n){const{gap:r=4}=e;2*r<n&&a(n-2*r<t?(n-2*r)/t:1)}};s.useEffect((()=>{o(!0)}),[]),s.useEffect((()=>{i(!0),a(1)}),[e.src]),s.useEffect(O,[e.gap]);const _=()=>{const{onError:t}=e;!1!==(null===t||void 0===t?void 0:t())&&i(!1)},{prefixCls:A,shape:N,size:z,src:B,srcSet:k,icon:L,className:P,rootClassName:F,alt:R,draggable:D,children:M,crossOrigin:W}=e,I=w(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),T=(0,h.A)((e=>{var t,n;return null!==(n=null!==(t=null!==z&&void 0!==z?z:null===C||void 0===C?void 0:C.size)&&void 0!==t?t:e)&&void 0!==n?n:"default"})),G=Object.keys("object"===typeof T&&T||{}).some((e=>["xs","sm","md","lg","xl","xxl"].includes(e))),H=(0,v.A)(G),K=s.useMemo((()=>{if("object"!==typeof T)return{};const e=m.ye.find((e=>H[e])),t=T[e];return t?{width:t,height:t,fontSize:t&&(L||M)?t/2:18}:{}}),[H,T]);const V=j("avatar",A),Y=(0,f.A)(V),[q,X,Q]=E(V,Y),U=d()({["".concat(V,"-lg")]:"large"===T,["".concat(V,"-sm")]:"small"===T}),J=s.isValidElement(B),Z=N||(null===C||void 0===C?void 0:C.shape)||"circle",$=d()(V,U,null===S||void 0===S?void 0:S.className,"".concat(V,"-").concat(Z),{["".concat(V,"-image")]:J||B&&c,["".concat(V,"-icon")]:!!L},Q,Y,P,F,X),ee="number"===typeof T?{width:T,height:T,fontSize:L?T/2:18}:{};let te;if("string"===typeof B&&c)te=s.createElement("img",{src:B,draggable:D,srcSet:k,onError:_,alt:R,crossOrigin:W});else if(J)te=B;else if(L)te=L;else if(r||1!==n){const e="scale(".concat(n,")"),t={msTransform:e,WebkitTransform:e,transform:e};te=s.createElement(u.A,{onResize:O},s.createElement("span",{className:"".concat(V,"-string"),ref:y,style:Object.assign({},t)},M))}else te=s.createElement("span",{className:"".concat(V,"-string"),style:{opacity:0},ref:y},M);return delete I.onError,delete I.gap,q(s.createElement("span",Object.assign({},I,{style:Object.assign(Object.assign(Object.assign(Object.assign({},ee),K),null===S||void 0===S?void 0:S.style),I.style),className:$,ref:x}),te))};const A=s.forwardRef(_);var N=n(604),z=n(9156),B=n(1207),k=n(1478);const L=e=>e?"function"===typeof e?e():e:null;var P=n(9437),F=n(6680),R=n(9888),D=n(8691),M=n(6871),W=n(1201),I=n(8704);const T=e=>{const{componentCls:t,popoverColor:n,titleMinWidth:a,fontWeightStrong:r,innerPadding:o,boxShadowSecondary:c,colorTextHeading:i,borderRadiusLG:s,zIndexPopup:l,titleMarginBottom:d,colorBgElevated:u,popoverBg:p,titleBorderBottom:m,innerContentPadding:g,titlePadding:f}=e;return[{[t]:Object.assign(Object.assign({},(0,x.dF)(e)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:l,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","--antd-arrow-background-color":u,width:"max-content",maxWidth:"100vw","&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},["".concat(t,"-content")]:{position:"relative"},["".concat(t,"-inner")]:{backgroundColor:p,backgroundClip:"padding-box",borderRadius:s,boxShadow:c,padding:o},["".concat(t,"-title")]:{minWidth:a,marginBottom:d,color:i,fontWeight:r,borderBottom:m,padding:f},["".concat(t,"-inner-content")]:{color:n,padding:g}})},(0,M.Ay)(e,"var(--antd-arrow-background-color)"),{["".concat(t,"-pure")]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow,display:"inline-block",["".concat(t,"-content")]:{display:"inline-block"}}}]},G=e=>{const{componentCls:t}=e;return{[t]:I.s.map((n=>{const a=e["".concat(n,"6")];return{["&".concat(t,"-").concat(n)]:{"--antd-arrow-background-color":a,["".concat(t,"-inner")]:{backgroundColor:a},["".concat(t,"-arrow")]:{background:"transparent"}}}}))}},H=(0,j.OF)("Popover",(e=>{const{colorBgElevated:t,colorText:n}=e,a=(0,S.h1)(e,{popoverBg:t,popoverColor:n});return[T(a),G(a),(0,D.aB)(a,"zoom-big")]}),(e=>{const{lineWidth:t,controlHeight:n,fontHeight:a,padding:r,wireframe:o,zIndexPopupBase:c,borderRadiusLG:i,marginXS:s,lineType:l,colorSplit:d,paddingSM:u}=e,p=n-a,m=p/2,g=p/2-t,f=r;return Object.assign(Object.assign(Object.assign({titleMinWidth:177,zIndexPopup:c+30},(0,W.n)(e)),(0,M.Ke)({contentRadius:i,limitVerticalRadius:!0})),{innerPadding:o?0:12,titleMarginBottom:o?0:s,titlePadding:o?"".concat(m,"px ").concat(f,"px ").concat(g,"px"):0,titleBorderBottom:o?"".concat(t,"px ").concat(l," ").concat(d):"none",innerContentPadding:o?"".concat(u,"px ").concat(f,"px"):0})}),{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]});var K=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const V=e=>{const{hashId:t,prefixCls:n,className:a,style:r,placement:o="top",title:c,content:i,children:l}=e;return s.createElement("div",{className:d()(t,n,"".concat(n,"-pure"),"".concat(n,"-placement-").concat(o),a),style:r},s.createElement("div",{className:"".concat(n,"-arrow")}),s.createElement(R.z,Object.assign({},e,{className:t,prefixCls:n}),l||((e,t,n)=>t||n?s.createElement(s.Fragment,null,t&&s.createElement("div",{className:"".concat(e,"-title")},L(t)),s.createElement("div",{className:"".concat(e,"-inner-content")},L(n))):null)(n,c,i)))},Y=e=>{const{prefixCls:t,className:n}=e,a=K(e,["prefixCls","className"]),{getPrefixCls:r}=s.useContext(g.QO),o=r("popover",t),[c,i,l]=H(o);return c(s.createElement(V,Object.assign({},a,{prefixCls:o,hashId:i,className:d()(n,l)})))};var q=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const X=e=>{let{title:t,content:n,prefixCls:a}=e;return s.createElement(s.Fragment,null,t&&s.createElement("div",{className:"".concat(a,"-title")},L(t)),s.createElement("div",{className:"".concat(a,"-inner-content")},L(n)))},Q=s.forwardRef(((e,t)=>{var n,a;const{prefixCls:r,title:o,content:c,overlayClassName:i,placement:l="top",trigger:u="hover",children:p,mouseEnterDelay:m=.1,mouseLeaveDelay:f=.1,onOpenChange:h,overlayStyle:v={}}=e,b=q(e,["prefixCls","title","content","overlayClassName","placement","trigger","children","mouseEnterDelay","mouseLeaveDelay","onOpenChange","overlayStyle"]),{getPrefixCls:y}=s.useContext(g.QO),x=y("popover",r),[j,S,C]=H(x),O=y(),E=d()(i,S,C),[w,_]=(0,B.A)(!1,{value:null!==(n=e.open)&&void 0!==n?n:e.visible,defaultValue:null!==(a=e.defaultOpen)&&void 0!==a?a:e.defaultVisible}),A=(e,t)=>{_(e,!0),null===h||void 0===h||h(e,t)};return j(s.createElement(F.A,Object.assign({placement:l,trigger:u,mouseEnterDelay:m,mouseLeaveDelay:f,overlayStyle:v},b,{prefixCls:x,overlayClassName:E,ref:t,open:w,onOpenChange:e=>{A(e)},overlay:o||c?s.createElement(X,{prefixCls:x,title:o,content:c}):null,transitionName:(0,P.b)(O,"zoom-big",b.transitionName),"data-popover-inject":!0}),(0,z.Ob)(p,{onKeyDown:e=>{var t,n;s.isValidElement(p)&&(null===(n=null===p||void 0===p?void 0:(t=p.props).onKeyDown)||void 0===n||n.call(t,e)),(e=>{e.keyCode===k.A.ESC&&A(!1,e)})(e)}})))}));Q._InternalPanelDoNotUseOrYouWillBeFired=Y;const U=Q,J=e=>{const{size:t,shape:n}=s.useContext(b),a=s.useMemo((()=>({size:e.size||t,shape:e.shape||n})),[e.size,e.shape,t,n]);return s.createElement(b.Provider,{value:a},e.children)},Z=e=>{const{getPrefixCls:t,direction:n}=s.useContext(g.QO),{prefixCls:a,className:r,rootClassName:o,style:c,maxCount:i,maxStyle:l,size:u,shape:p,maxPopoverPlacement:m="top",maxPopoverTrigger:h="hover",children:v}=e,b=t("avatar",a),y="".concat(b,"-group"),x=(0,f.A)(b),[j,S,C]=E(b,x),O=d()(y,{["".concat(y,"-rtl")]:"rtl"===n},C,x,r,o,S),w=(0,N.A)(v).map(((e,t)=>(0,z.Ob)(e,{key:"avatar-key-".concat(t)}))),_=w.length;if(i&&i<_){const e=w.slice(0,i),t=w.slice(i,_);return e.push(s.createElement(U,{key:"avatar-popover-key",content:t,trigger:h,placement:m,overlayClassName:"".concat(y,"-popover"),destroyTooltipOnHide:!0},s.createElement(A,{style:l},"+".concat(_-i)))),j(s.createElement(J,{shape:p,size:u},s.createElement("div",{className:O,style:c},e)))}return j(s.createElement(J,{shape:p,size:u},s.createElement("div",{className:O,style:c},w)))},$=A;$.Group=Z;const ee=$;var te=n(4051),ne=n(326),ae=n(859),re=n(6541),oe=n(4159),ce=n.n(oe),ie=n(6338);const se=["Deal Submitted","Offer Received Back","Contract out","Contract signed","Fully funded","Client Rejected","Declined","Disqualified"],le={"leads assigned":"Leads Assinged","deal submitted":"Deal Submitted","offer received back":"Offers Ready","contract out":"Contract out","contract signed":"Contract Signed","fully funded":"Funded","client rejected":"Client Rejected",declined:"Declined",disqualified:"Disqualified"},de={"deal submitted":"leads assigned","offer received back":"deal submitted","contract out":"offer received back","contract signed":"contract out","fully funded":"contract signed","client rejected":"deal submitted",declined:"deal submitted",disqualified:"deal submitted"},ue="LeaderBoards_table__u3STH",pe="LeaderBoards_headerRow__Bv7Lq",me="LeaderBoards_headerColumnTitle__BbeRM",ge="LeaderBoards_dataColumnTitle__bj7wK",fe="LeaderBoards_headerColumnPerson__JzV2F",he="LeaderBoards_dataColumnPerson__V8O69",ve="LeaderBoards_dataRow__H-WEt",be="LeaderBoards_filterbar__nKucZ",ye="LeaderBoards_usersList__4ySG9",xe="LeaderBoards_filterField__14bMZ",je="LeaderBoards_alternateColor__iGVHE",Se="LeaderBoards_percentage__J7lGV";var Ce=n(4414);const{RangePicker:Oe}=o.A;const Ee=function(e){let t,n,{withFilter:a}=e;const[r,o]=(0,s.useState)(!1),[l,u]=(0,s.useState)(!1),[p,m]=(0,s.useState)([]),[g,f]=(0,s.useState)([]),[h,v]=(0,s.useState)([]),[b,y]=(0,s.useState)([]),[x,j]=(0,s.useState)([ce()(),ce()()]),S=(0,s.useRef)(),[C,O]=(0,s.useState)([]),[E,w]=(0,s.useState)([]),[_,A]=(0,s.useState)([]),N=async()=>{const e=await(0,te.iE)(ne._K.boards.salesActivities,"status"),t=Object.values(e).reduce(((e,t)=>(e[t.toLowerCase()]=t.toLowerCase(),e)),{}),n=se.map((e=>e.toLowerCase())),a=(0,ie.Ye)(Object.keys(t),n,!0);O(a)},z=async()=>{const e=await(0,te.Wd)();if(m(e),a){const t=null===e||void 0===e?void 0:e.map((e=>e.id));y(t)}},B=async function(e){o(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]);const t=await(0,te.EU)(e);w(t),o(!1)},k=async function(e,t){u(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]);const n=await(0,te.D5)(e,t);A(n),u(!1)};(0,s.useEffect)((()=>{z(),N(),S.current=[ce()(),ce()()],a&&(async()=>{const e=await(0,te.Ym)(),t=null===e||void 0===e?void 0:e.map((e=>({value:e.id,label:e.name})));f(e),v(t)})()}),[]),(0,s.useEffect)((()=>{0!==p.length&&(B(x),k(x,p))}),[p,x]);const L=e=>{let{data:t}=e;t.itemIds.includes(Number(ne._K.leaderEmployeeItemId))&&(n&&clearTimeout(n),n=setTimeout((()=>{z()}),3e3))};return(0,s.useEffect)((()=>a?null:(t=ae.A.listen("events",L),()=>{t&&t()})),[]),(0,s.useEffect)((()=>{if(a)return null;const e=setInterval((()=>{var e;e=S.current,N(),B(e,!1),k(x,p,!1)}),1e3*ne._K.performanceRefetchTime);return()=>{e&&clearInterval(e)}}),[]),(0,Ce.jsxs)(c.A,{vertical:!0,flex:1,children:[(0,Ce.jsx)(i.A,{tip:"Loading...",spinning:r||l,fullscreen:!0}),a?(0,Ce.jsxs)(c.A,{className:be,align:"center",children:[(0,Ce.jsx)(c.A,{children:"Filters: "}),(0,Ce.jsx)(c.A,{className:xe,children:(0,Ce.jsx)(re.A,{classnames:ye,options:h,onChange:e=>{const t=g.filter((t=>e.includes(t.id)));m(t),y(e)},mode:"multiple",maxTagCount:3,placeholder:"Select Users",value:b})}),(0,Ce.jsx)(c.A,{className:xe,children:(0,Ce.jsx)(Oe,{value:x,placeholder:"Select Date Range",onChange:e=>{j(e),S.current=e},allowClear:!1,maxDate:ce()(),format:"MM-DD-YYYY"})})]}):null,(0,Ce.jsxs)(c.A,{vertical:!0,className:ue,children:[(0,Ce.jsxs)(c.A,{className:pe,align:"center",children:[(0,Ce.jsx)(c.A,{className:me,children:"Performance Leaderboard"}),(0,Ce.jsx)(c.A,{className:fe,vertical:!0,justify:"center",align:"center",children:(0,Ce.jsx)(c.A,{children:le["leads assigned"]})}),C.map((e=>(0,Ce.jsx)(c.A,{className:fe,vertical:!0,justify:"center",align:"center",children:(0,Ce.jsx)(c.A,{children:le[e]})})))]}),p.map(((e,t)=>(0,Ce.jsxs)(c.A,{className:d()(ve,{[je]:t%2}),children:[(0,Ce.jsxs)(c.A,{className:ge,align:"center",children:[(0,Ce.jsx)(c.A,{style:{marginRight:10},children:e.photo_thumb?(0,Ce.jsx)(ee,{src:e.photo_thumb}):(0,Ce.jsx)(ee,{children:e.name[0]})}),(0,Ce.jsx)(c.A,{children:e.name.split(" ")[0]})]}),(0,Ce.jsx)(c.A,{className:he,justify:"center",align:"center",children:(_[e.id]||{}).count||" "}),C.map((t=>{const n=de[t],a="leads assigned"===n?(_[e.id]||{}).count:(E[n]||{})[e.id],r=(E[t]||{})[e.id],o=a&&r?(r/a*100).toFixed(0):"";return(0,Ce.jsxs)(c.A,{className:he,justify:"center",align:"center",vertical:!0,children:[(0,Ce.jsx)(c.A,{children:(E[t]||{})[e.id]||" "}),(0,Ce.jsx)(c.A,{className:Se,children:o?"".concat(o,"%"):""})]})}))]})))]})]})};const we=function(e){let{withFilter:t}=e;return(0,Ce.jsx)(a.Ay,{theme:{token:{fontFamily:"Poppins"},components:{Layout:{bodyBg:"#E1EFF2",headerBg:"#E1EFF2"}}},children:(0,Ce.jsx)(r.A,{style:{padding:"0 8px 24px"},children:(0,Ce.jsx)(Ee,{withFilter:t})})})}}}]);