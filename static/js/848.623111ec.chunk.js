"use strict";(self.webpackChunkbroker_dashboard=self.webpackChunkbroker_dashboard||[]).push([[848],{7848:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Oe});var a=n(5465),r=n(718),o=n(2746),s=n(4064),l=n(2612),c=n(9950),i=n(8738),d=n.n(i),p=n(7090),u=n(1929),m=n(6191),g=n(5741),f=n(5656),h=n(9415),v=n(183);const b=c.createContext({});var y=n(7409),x=n(5343),S=n(2672),O=n(1874);const C=e=>{const{antCls:t,componentCls:n,iconCls:a,avatarBg:r,avatarColor:o,containerSize:s,containerSizeLG:l,containerSizeSM:c,textFontSize:i,textFontSizeLG:d,textFontSizeSM:p,borderRadius:u,borderRadiusLG:m,borderRadiusSM:g,lineWidth:f,lineType:h}=e,v=(e,t,r)=>({width:e,height:e,borderRadius:"50%",["&".concat(n,"-square")]:{borderRadius:r},["&".concat(n,"-icon")]:{fontSize:t,["> ".concat(a)]:{margin:0}}});return{[n]:Object.assign(Object.assign(Object.assign(Object.assign({},(0,x.dF)(e)),{position:"relative",display:"inline-flex",justifyContent:"center",alignItems:"center",overflow:"hidden",color:o,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:r,border:"".concat((0,y.zA)(f)," ").concat(h," transparent"),"&-image":{background:"transparent"},["".concat(t,"-image-img")]:{display:"block"}}),v(s,i,u)),{"&-lg":Object.assign({},v(l,d,m)),"&-sm":Object.assign({},v(c,p,g)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},j=e=>{const{componentCls:t,groupBorderColor:n,groupOverlapping:a,groupSpace:r}=e;return{["".concat(t,"-group")]:{display:"inline-flex",["".concat(t)]:{borderColor:n},"> *:not(:first-child)":{marginInlineStart:a}},["".concat(t,"-group-popover")]:{["".concat(t," + ").concat(t)]:{marginInlineStart:r}}}},E=(0,S.OF)("Avatar",(e=>{const{colorTextLightSolid:t,colorTextPlaceholder:n}=e,a=(0,O.h1)(e,{avatarBg:n,avatarColor:t});return[C(a),j(a)]}),(e=>{const{controlHeight:t,controlHeightLG:n,controlHeightSM:a,fontSize:r,fontSizeLG:o,fontSizeXL:s,fontSizeHeading3:l,marginXS:c,marginXXS:i,colorBorderBg:d}=e;return{containerSize:t,containerSizeLG:n,containerSizeSM:a,textFontSize:Math.round((o+s)/2),textFontSizeLG:l,textFontSizeSM:r,groupSpace:i,groupOverlapping:-c,groupBorderColor:d}}));var w=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const _=(e,t)=>{const[n,a]=c.useState(1),[r,o]=c.useState(!1),[s,l]=c.useState(!0),i=c.useRef(null),y=c.useRef(null),x=(0,u.K4)(t,i),{getPrefixCls:S,avatar:O}=c.useContext(g.QO),C=c.useContext(b),j=()=>{if(!y.current||!i.current)return;const t=y.current.offsetWidth,n=i.current.offsetWidth;if(0!==t&&0!==n){const{gap:r=4}=e;2*r<n&&a(n-2*r<t?(n-2*r)/t:1)}};c.useEffect((()=>{o(!0)}),[]),c.useEffect((()=>{l(!0),a(1)}),[e.src]),c.useEffect(j,[e.gap]);const _=()=>{const{onError:t}=e;!1!==(null===t||void 0===t?void 0:t())&&l(!1)},{prefixCls:z,shape:N,size:A,src:B,srcSet:P,icon:L,className:k,rootClassName:F,alt:R,draggable:M,children:W,crossOrigin:I}=e,T=w(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),D=(0,h.A)((e=>{var t,n;return null!==(n=null!==(t=null!==A&&void 0!==A?A:null===C||void 0===C?void 0:C.size)&&void 0!==t?t:e)&&void 0!==n?n:"default"})),G=Object.keys("object"===typeof D&&D||{}).some((e=>["xs","sm","md","lg","xl","xxl"].includes(e))),H=(0,v.A)(G),K=c.useMemo((()=>{if("object"!==typeof D)return{};const e=m.ye.find((e=>H[e])),t=D[e];return t?{width:t,height:t,fontSize:t&&(L||W)?t/2:18}:{}}),[H,D]);const V=S("avatar",z),Y=(0,f.A)(V),[X,Q,U]=E(V,Y),q=d()({["".concat(V,"-lg")]:"large"===D,["".concat(V,"-sm")]:"small"===D}),Z=c.isValidElement(B),J=N||(null===C||void 0===C?void 0:C.shape)||"circle",$=d()(V,q,null===O||void 0===O?void 0:O.className,"".concat(V,"-").concat(J),{["".concat(V,"-image")]:Z||B&&s,["".concat(V,"-icon")]:!!L},U,Y,k,F,Q),ee="number"===typeof D?{width:D,height:D,fontSize:L?D/2:18}:{};let te;if("string"===typeof B&&s)te=c.createElement("img",{src:B,draggable:M,srcSet:P,onError:_,alt:R,crossOrigin:I});else if(Z)te=B;else if(L)te=L;else if(r||1!==n){const e="scale(".concat(n,")"),t={msTransform:e,WebkitTransform:e,transform:e};te=c.createElement(p.A,{onResize:j},c.createElement("span",{className:"".concat(V,"-string"),ref:y,style:Object.assign({},t)},W))}else te=c.createElement("span",{className:"".concat(V,"-string"),style:{opacity:0},ref:y},W);return delete T.onError,delete T.gap,X(c.createElement("span",Object.assign({},T,{style:Object.assign(Object.assign(Object.assign(Object.assign({},ee),K),null===O||void 0===O?void 0:O.style),T.style),className:$,ref:x}),te))};const z=c.forwardRef(_);var N=n(604),A=n(9156),B=n(1207),P=n(1478);const L=e=>e?"function"===typeof e?e():e:null;var k=n(9437),F=n(6680),R=n(9888),M=n(8691),W=n(6871),I=n(1201),T=n(8704);const D=e=>{const{componentCls:t,popoverColor:n,titleMinWidth:a,fontWeightStrong:r,innerPadding:o,boxShadowSecondary:s,colorTextHeading:l,borderRadiusLG:c,zIndexPopup:i,titleMarginBottom:d,colorBgElevated:p,popoverBg:u,titleBorderBottom:m,innerContentPadding:g,titlePadding:f}=e;return[{[t]:Object.assign(Object.assign({},(0,x.dF)(e)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:i,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","--antd-arrow-background-color":p,width:"max-content",maxWidth:"100vw","&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},["".concat(t,"-content")]:{position:"relative"},["".concat(t,"-inner")]:{backgroundColor:u,backgroundClip:"padding-box",borderRadius:c,boxShadow:s,padding:o},["".concat(t,"-title")]:{minWidth:a,marginBottom:d,color:l,fontWeight:r,borderBottom:m,padding:f},["".concat(t,"-inner-content")]:{color:n,padding:g}})},(0,W.Ay)(e,"var(--antd-arrow-background-color)"),{["".concat(t,"-pure")]:{position:"relative",maxWidth:"none",margin:e.sizePopupArrow,display:"inline-block",["".concat(t,"-content")]:{display:"inline-block"}}}]},G=e=>{const{componentCls:t}=e;return{[t]:T.s.map((n=>{const a=e["".concat(n,"6")];return{["&".concat(t,"-").concat(n)]:{"--antd-arrow-background-color":a,["".concat(t,"-inner")]:{backgroundColor:a},["".concat(t,"-arrow")]:{background:"transparent"}}}}))}},H=(0,S.OF)("Popover",(e=>{const{colorBgElevated:t,colorText:n}=e,a=(0,O.h1)(e,{popoverBg:t,popoverColor:n});return[D(a),G(a),(0,M.aB)(a,"zoom-big")]}),(e=>{const{lineWidth:t,controlHeight:n,fontHeight:a,padding:r,wireframe:o,zIndexPopupBase:s,borderRadiusLG:l,marginXS:c,lineType:i,colorSplit:d,paddingSM:p}=e,u=n-a,m=u/2,g=u/2-t,f=r;return Object.assign(Object.assign(Object.assign({titleMinWidth:177,zIndexPopup:s+30},(0,I.n)(e)),(0,W.Ke)({contentRadius:l,limitVerticalRadius:!0})),{innerPadding:o?0:12,titleMarginBottom:o?0:c,titlePadding:o?"".concat(m,"px ").concat(f,"px ").concat(g,"px"):0,titleBorderBottom:o?"".concat(t,"px ").concat(i," ").concat(d):"none",innerContentPadding:o?"".concat(p,"px ").concat(f,"px"):0})}),{resetStyle:!1,deprecatedTokens:[["width","titleMinWidth"],["minWidth","titleMinWidth"]]});var K=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const V=e=>{const{hashId:t,prefixCls:n,className:a,style:r,placement:o="top",title:s,content:l,children:i}=e;return c.createElement("div",{className:d()(t,n,"".concat(n,"-pure"),"".concat(n,"-placement-").concat(o),a),style:r},c.createElement("div",{className:"".concat(n,"-arrow")}),c.createElement(R.z,Object.assign({},e,{className:t,prefixCls:n}),i||((e,t,n)=>t||n?c.createElement(c.Fragment,null,t&&c.createElement("div",{className:"".concat(e,"-title")},L(t)),c.createElement("div",{className:"".concat(e,"-inner-content")},L(n))):null)(n,s,l)))},Y=e=>{const{prefixCls:t,className:n}=e,a=K(e,["prefixCls","className"]),{getPrefixCls:r}=c.useContext(g.QO),o=r("popover",t),[s,l,i]=H(o);return s(c.createElement(V,Object.assign({},a,{prefixCls:o,hashId:l,className:d()(n,i)})))};var X=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n};const Q=e=>{let{title:t,content:n,prefixCls:a}=e;return c.createElement(c.Fragment,null,t&&c.createElement("div",{className:"".concat(a,"-title")},L(t)),c.createElement("div",{className:"".concat(a,"-inner-content")},L(n)))},U=c.forwardRef(((e,t)=>{var n,a;const{prefixCls:r,title:o,content:s,overlayClassName:l,placement:i="top",trigger:p="hover",children:u,mouseEnterDelay:m=.1,mouseLeaveDelay:f=.1,onOpenChange:h,overlayStyle:v={}}=e,b=X(e,["prefixCls","title","content","overlayClassName","placement","trigger","children","mouseEnterDelay","mouseLeaveDelay","onOpenChange","overlayStyle"]),{getPrefixCls:y}=c.useContext(g.QO),x=y("popover",r),[S,O,C]=H(x),j=y(),E=d()(l,O,C),[w,_]=(0,B.A)(!1,{value:null!==(n=e.open)&&void 0!==n?n:e.visible,defaultValue:null!==(a=e.defaultOpen)&&void 0!==a?a:e.defaultVisible}),z=(e,t)=>{_(e,!0),null===h||void 0===h||h(e,t)};return S(c.createElement(F.A,Object.assign({placement:i,trigger:p,mouseEnterDelay:m,mouseLeaveDelay:f,overlayStyle:v},b,{prefixCls:x,overlayClassName:E,ref:t,open:w,onOpenChange:e=>{z(e)},overlay:o||s?c.createElement(Q,{prefixCls:x,title:o,content:s}):null,transitionName:(0,k.b)(j,"zoom-big",b.transitionName),"data-popover-inject":!0}),(0,A.Ob)(u,{onKeyDown:e=>{var t,n;c.isValidElement(u)&&(null===(n=null===u||void 0===u?void 0:(t=u.props).onKeyDown)||void 0===n||n.call(t,e)),(e=>{e.keyCode===P.A.ESC&&z(!1,e)})(e)}})))}));U._InternalPanelDoNotUseOrYouWillBeFired=Y;const q=U,Z=e=>{const{size:t,shape:n}=c.useContext(b),a=c.useMemo((()=>({size:e.size||t,shape:e.shape||n})),[e.size,e.shape,t,n]);return c.createElement(b.Provider,{value:a},e.children)},J=e=>{const{getPrefixCls:t,direction:n}=c.useContext(g.QO),{prefixCls:a,className:r,rootClassName:o,style:s,maxCount:l,maxStyle:i,size:p,shape:u,maxPopoverPlacement:m="top",maxPopoverTrigger:h="hover",children:v}=e,b=t("avatar",a),y="".concat(b,"-group"),x=(0,f.A)(b),[S,O,C]=E(b,x),j=d()(y,{["".concat(y,"-rtl")]:"rtl"===n},C,x,r,o,O),w=(0,N.A)(v).map(((e,t)=>(0,A.Ob)(e,{key:"avatar-key-".concat(t)}))),_=w.length;if(l&&l<_){const e=w.slice(0,l),t=w.slice(l,_);return e.push(c.createElement(q,{key:"avatar-popover-key",content:t,trigger:h,placement:m,overlayClassName:"".concat(y,"-popover"),destroyTooltipOnHide:!0},c.createElement(z,{style:i},"+".concat(_-l)))),S(c.createElement(Z,{shape:u,size:p},c.createElement("div",{className:j,style:s},e)))}return S(c.createElement(Z,{shape:u,size:p},c.createElement("div",{className:j,style:s},w)))},$=z;$.Group=J;const ee=$;var te=n(4051),ne=n(326),ae=n(859),re=n(6541),oe=n(4159),se=n.n(oe),le=n(6338);const ce="LeaderBoards_table__u3STH",ie="LeaderBoards_headerRow__Bv7Lq",de="LeaderBoards_headerColumnTitle__BbeRM",pe="LeaderBoards_dataColumnTitle__bj7wK",ue="LeaderBoards_headerColumnPerson__JzV2F",me="LeaderBoards_dataColumnPerson__V8O69",ge="LeaderBoards_dataRow__H-WEt",fe="LeaderBoards_filterbar__nKucZ",he="LeaderBoards_usersList__4ySG9",ve="LeaderBoards_filterField__14bMZ",be="LeaderBoards_alternateColor__iGVHE";var ye=n(4414);const{RangePicker:xe}=o.A;const Se=function(e){let t,n,{withFilter:a}=e;const[r,o]=(0,c.useState)(!1),[i,p]=(0,c.useState)([]),[u,m]=(0,c.useState)([]),[g,f]=(0,c.useState)([]),[h,v]=(0,c.useState)([]),[b,y]=(0,c.useState)([se()(),se()()]),x=(0,c.useRef)(),[S,O]=(0,c.useState)([]),[C,j]=(0,c.useState)([]),E=async()=>{const e=await(0,te.iE)(ne._K.boards.salesActivities,"status"),t=Object.values(e).reduce(((e,t)=>(e[t.toLowerCase()]=t.toLowerCase(),e)),{}),n=ne.At.map((e=>e.toLowerCase())),a=(0,le.Ye)(Object.keys(t),n);O(a)},w=async()=>{const e=await(0,te.Wd)();if(p(e),a){const t=null===e||void 0===e?void 0:e.map((e=>e.id));v(t)}},_=async function(e){o(!(arguments.length>1&&void 0!==arguments[1])||arguments[1]);const t=await(0,te.EU)(e);j(t),o(!1)};(0,c.useEffect)((()=>{w(),E(),x.current=[se()(),se()()],a&&(async()=>{const e=await(0,te.Ym)(),t=null===e||void 0===e?void 0:e.map((e=>({value:e.id,label:e.name})));m(e),f(t)})()}),[]),(0,c.useEffect)((()=>{0!==i.length&&_(b)}),[i,b]);const z=e=>{let{data:t}=e;t.itemIds.includes(Number(ne._K.leaderEmployeeItemId))&&(n&&clearTimeout(n),n=setTimeout((()=>{w()}),3e3))};return(0,c.useEffect)((()=>a?null:(t=ae.A.listen("events",z),()=>{t&&t()})),[]),(0,c.useEffect)((()=>{if(a)return null;const e=setInterval((()=>{var e;e=x.current,E(),_(e,!1)}),1e3*ne._K.performanceRefetchTime);return()=>{e&&clearInterval(e)}}),[]),(0,ye.jsxs)(s.A,{vertical:!0,flex:1,children:[(0,ye.jsx)(l.A,{tip:"Loading...",spinning:r,fullscreen:!0}),a?(0,ye.jsxs)(s.A,{className:fe,align:"center",children:[(0,ye.jsx)(s.A,{children:"Filters: "}),(0,ye.jsx)(s.A,{className:ve,children:(0,ye.jsx)(re.A,{classnames:he,options:g,onChange:e=>{const t=u.filter((t=>e.includes(t.id)));p(t),v(e)},mode:"multiple",maxTagCount:3,placeholder:"Select Users",value:h})}),(0,ye.jsx)(s.A,{className:ve,children:(0,ye.jsx)(xe,{value:b,placeholder:"Select Date Range",onChange:e=>{y(e),x.current=e},allowClear:!1,maxDate:se()(),format:"MM-DD-YYYY"})})]}):null,(0,ye.jsxs)(s.A,{vertical:!0,className:ce,children:[(0,ye.jsxs)(s.A,{className:ie,align:"center",children:[(0,ye.jsx)(s.A,{className:de,children:"Performance Leaderboard"}),i.map((e=>(0,ye.jsxs)(s.A,{className:ue,vertical:!0,justify:"center",align:"center",children:[(0,ye.jsx)(s.A,{children:e.photo_thumb?(0,ye.jsx)(ee,{src:e.photo_thumb}):(0,ye.jsx)(ee,{children:e.name[0]})}),(0,ye.jsx)(s.A,{children:e.name.split(" ")[0]})]})))]}),S.map(((e,t)=>(0,ye.jsxs)(s.A,{className:d()(ge,{[be]:t%2}),children:[(0,ye.jsx)(s.A,{className:pe,align:"center",children:(0,le.zX)(e)}),i.map((t=>(0,ye.jsx)(s.A,{className:me,justify:"center",align:"center",children:(C[e]||{})[t.id]||" "})))]})))]})]})};const Oe=function(e){let{withFilter:t}=e;return(0,ye.jsx)(a.Ay,{theme:{token:{fontFamily:"Poppins"},components:{Layout:{bodyBg:"#E1EFF2",headerBg:"#E1EFF2"}}},children:(0,ye.jsx)(r.A,{style:{padding:"0 8px 24px"},children:(0,ye.jsx)(Se,{withFilter:t})})})}}}]);