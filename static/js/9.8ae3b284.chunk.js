"use strict";(self.webpackChunkbroker_dashboard=self.webpackChunkbroker_dashboard||[]).push([[9],{1968:(e,t,a)=>{a.d(t,{A:()=>c});var s=a(6338),n=a(4414);const{useState:l,useEffect:i}=a(9950);const c=function(e){let{startSeconds:t,isReverse:a,limit:c,goalTime:d,onFinish:r=(()=>{}),updateTime:o=(()=>{})}=e;const[u,h]=l();return i((()=>{h(t)}),[t]),i((()=>{const e=setInterval((()=>{u>=0&&h((e=>a?e-1:e+1))}),1e3);return o(u),c===u&&(clearInterval(e),r()),()=>clearInterval(e)}),[u]),(0,n.jsx)("span",{style:d?{color:(0,s.ve)(u,d)}:{},children:(0,s.od)(u)})}},1340:(e,t,a)=>{a.d(t,{A:()=>h});var s=a(9950),n=a(4064),l=a(8738),i=a.n(l),c=a(640),d=a(8342),r=a(7939);const o={textStyle:"DataTable_textStyle__tKKSk",itemContainer:"DataTable_itemContainer__TESDP",rowPadding:"DataTable_rowPadding__Vb9z2",headerRow:"DataTable_headerRow__2iwcE",itemRow:"DataTable_itemRow__KQavJ",itemColumn:"DataTable_itemColumn__P-GQu",phoneIcon:"DataTable_phoneIcon__GNg47",newTag:"DataTable_newTag__-tMul"};var u=a(4414);const h=function(e){let{columns:t,data:a,highlightClass:l,newTagClass:h,hoverClass:_,board:m,disableClick:x,disableNewTag:g,callBackOnOpen:j=(()=>{})}=e;const[f,v]=(0,s.useState)(),[A,N]=(0,s.useState)();return(0,u.jsxs)(n.A,{className:o.textStyle,vertical:!0,children:[(0,u.jsx)(n.A,{justify:"space-between",className:o.headerContainer,children:t.map(((e,t)=>(0,u.jsx)(n.A,{className:i()(o.headerRow,o.rowPadding),flex:0===t?1.3:.75,justify:e.align,children:e.title},e.key)))}),(0,u.jsx)(n.A,{justify:"space-between",className:o.itemContainer,vertical:!0,children:a.map(((e,a)=>(0,u.jsx)(n.A,{onClick:x?()=>{}:()=>{var t;t=e.key,N(t),j(t),v(!0)},className:i()(o.itemRow,o.rowPadding,_,{[l]:e.isNew}),align:"center",children:t.map(((t,a)=>{var s;return(0,u.jsxs)(n.A,{className:o.itemColumn,flex:0===a?1:.6,justify:t.align,align:"center",children:[0===a?(0,u.jsx)("span",{className:o.phoneIcon,children:(0,u.jsx)(c.E,{color:e.isNew?"#FFF":void 0})}):null,null!==t&&void 0!==t&&t.render?null===t||void 0===t?void 0:t.render(e[t.dataIndex],e):null===(s=e[t.dataIndex])||void 0===s?void 0:s.substring(0,t.maxLength||20),e[t.dataIndex].length>30?"...":"",0===a&&e.isNew&&!g?(0,u.jsx)(n.A,{justify:"center",align:"center",className:i()(o.newTag,h),children:d.A.Cards.new}):null]},t.key)}))},"".concat(e.key,"-").concat(a))))}),f?(0,u.jsx)(r.A,{show:f,handleClose:()=>{N(""),v(!1)},leadId:A,board:m}):null]})}},8009:(e,t,a)=>{a.r(t),a.d(t,{default:()=>re});var s=a(5465),n=a(718),l=a(4064),i=a(8871),c=a(9950),d=a(4051),r=a(326),o=a(4159),u=a.n(o),h=a(859),_=a(2746),m=a(2056);const x="Legends_legends__wL+8a",g="Legends_legendColor__J+nH6";var j=a(4414);const f=function(e){let{data:t}=e;return(0,j.jsx)(l.A,{vertical:!0,className:x,justify:"center",children:Object.entries(t).map(((e,t)=>{let[a,s]=e;return(0,j.jsxs)(l.A,{justify:"space-between",children:[(0,j.jsxs)(l.A,{align:"center",children:[(0,j.jsx)("span",{className:g,style:{backgroundColor:r._o[t]}}),a]}),(0,j.jsx)(l.A,{children:s})]})}))})};var v=a(976),A=function(){return A=Object.assign||function(e){for(var t,a=1,s=arguments.length;a<s;a++)for(var n in t=arguments[a])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},A.apply(this,arguments)};const N=(0,c.forwardRef)((function(e,t){return c.createElement(v.c,A({},e,{chartType:"Pie",ref:t}))}));const w=function(e){let{data:t,total:a}=e;const s=Object.entries(t).map((e=>{let[t,a]=e;return{type:t,value:a}}));if(s.length>0){const e={width:300,height:300,data:s,angleField:"value",colorField:"type",paddingRight:0,innerRadius:.8,scale:{color:{palette:r._o}},label:!1,legend:!1,tooltip:!1,annotations:[{type:"text",style:{text:"Total",x:"50%",y:"35%",textAlign:"center",fontSize:15,fontStyle:"bold"}},{type:"text",style:{text:a.toString(),x:"50%",y:"50%",textAlign:"center",fontSize:70,fontStyle:"bold"}}]};return(0,j.jsx)(N,{...e})}return null},b="NewLeadsChart_card__yzgVT",{RangePicker:T}=_.A;const p=function(){const{newLeads:e,dateRange:t,handleChangeDates:a}=(0,c.useContext)(i.r),[s,n]=(0,c.useState)({});return(0,c.useEffect)((()=>{if(!e)return;const t=null===e||void 0===e?void 0:e.reduce(((e,t)=>{const a=e,s=null===t.channel?"None":t.channel;return a[s]?a[s]+=1:a[s]=1,a}),{});n(t)}),[e]),(0,j.jsx)(m.A,{className:b,title:"New Leads",extra:(0,j.jsx)(T,{value:t,placeholder:"Select Date Range",onChange:a,allowClear:!1,maxDate:u()(),format:"MM-DD-YYYY"}),children:(0,j.jsxs)(l.A,{justify:"space-around",children:[(0,j.jsx)(l.A,{children:(0,j.jsx)(w,{data:s,total:e.length})}),(0,j.jsx)(f,{data:s})]})})};var y=a(1340),D=a(6338),C=a(8738),S=a.n(C);const z={card:"NewLeadsQueue_card__OJRHa",tableContainer:"NewLeadsQueue_tableContainer__8j8jS",avgQueTitle:"NewLeadsQueue_avgQueTitle__Df7mK",avgTitle:"NewLeadsQueue_avgTitle__CaO8d",avgTime:"NewLeadsQueue_avgTime__jvxef",red:"NewLeadsQueue_red__bU1Dh",orange:"NewLeadsQueue_orange__wfttd",green:"NewLeadsQueue_green__pAAHt"};var L=a(1968);const P=(e,t)=>[{title:"Lead Name",dataIndex:"name",key:"name",maxLength:30},{title:"Time in",dataIndex:"time",key:"time",align:"center",render:(e,a)=>a.isNew?(0,j.jsx)(L.A,{startSeconds:e,limit:300,goalTime:t}):(0,D.od)(e)},{title:"Reassigned in",dataIndex:"reassingTime",key:"reassingTime",align:"center",render:(t,a)=>a.isNew?(0,j.jsx)(L.A,{startSeconds:t,isReverse:!0,limit:0,onFinish:e}):(0,D.od)(t)},{title:"Assigned To",dataIndex:"assignedTo",key:"assignedTo",align:"center"}];const k=function(){const{newLeads:e,goalTime:t,getNewLeadsData:a,dateRange:s}=(0,c.useContext)(i.r),n=e.filter((e=>e.isNew&&!e.isAllPassedTimer)),d=e.filter((e=>e.isAllPassedTimer||e.isTouched)),r=d.reduce(((e,t)=>e+=t.timeToRespond),0)/d.length;return(0,j.jsx)(m.A,{className:z.card,title:"Current Untouched Leads in Que",children:(0,j.jsxs)(l.A,{flex:1,vertical:!0,children:[(0,j.jsx)("div",{className:z.tableContainer,children:(0,j.jsx)(y.A,{columns:P((()=>{a(s)}),t),data:n,disableClick:!0,disableNewTag:!0,board:"leads"})}),(0,j.jsxs)(l.A,{vertical:!0,children:[(0,j.jsx)(l.A,{className:z.avgQueTitle,children:"Average Que Time"}),(0,j.jsxs)(l.A,{flex:1,children:[(0,j.jsxs)(l.A,{flex:.5,vertical:!0,align:"center",children:[(0,j.jsx)(l.A,{className:z.avgTitle,children:"Actual for Today"}),(0,j.jsx)(l.A,{className:S()(z.avgTime,z[(0,D.ve)(r,t)]),children:d.length?(0,D.od)(r):"00:00"})]}),(0,j.jsxs)(l.A,{flex:.5,vertical:!0,align:"center",children:[(0,j.jsx)(l.A,{className:z.avgTitle,children:"Goal"}),(0,j.jsx)(l.A,{className:z.avgTime,children:(0,D.od)(t)})]})]})]})]})})};const F=function(){return(0,j.jsxs)(l.A,{children:[(0,j.jsx)(p,{}),(0,j.jsx)(k,{})]})},R="NewDealsSubmitted_card__wCE4g",G="NewDealsSubmitted_dealCount__px0pk",I="NewDealsSubmitted_dealsPercent__iKYAW",E="NewDealsSubmitted_dealsGoal__90kxT";const Q=function(){const{newLeads:e,submittedDeals:t,dealGoal:a}=(0,c.useContext)(i.r),[s,n]=(0,c.useState)({});(0,c.useEffect)((()=>{if(!t)return;const e=null===t||void 0===t?void 0:t.reduce(((e,t)=>{const a=e,s=(0,D.MH)(t.column_values),n=null===s[r.zu.deals.channel]?"None":s[r.zu.deals.channel];return a[n]?a[n]+=1:a[n]=1,a}),{});n(e)}),[t]);const d=e.length>0?t.length/e.length*100:0,o=t.length/a*100;return(0,j.jsx)(m.A,{className:R,title:"New Deals Submitted",children:(0,j.jsxs)(l.A,{justify:"space-around",children:[(0,j.jsxs)(l.A,{vertical:!0,align:"center",children:[(0,j.jsx)(l.A,{className:G,children:t.length}),(0,j.jsx)(l.A,{className:I,children:"".concat(d.toFixed(2),"% of Leads")}),(0,j.jsxs)(l.A,{className:E,children:["Goal:"," ",o.toFixed(2),"%"]})]}),(0,j.jsx)(l.A,{children:(0,j.jsx)(f,{data:s})})]})})},H="LeadsWithOfferToPitch_card__r55zt",M="LeadsWithOfferToPitch_dealCount__QR4e6",O="LeadsWithOfferToPitch_dealsGoal__wA+ks";const Y=function(){const{submittedDeals:e}=(0,c.useContext)(i.r),t=e.filter((e=>"Offers Ready/Approved"===(0,D.MH)(e.column_values)[r.zu.deals.stage])),a=e.length>0?t.length/e.length*100:0;return(0,j.jsx)(m.A,{className:H,title:"Leads with offer to pitch",children:(0,j.jsxs)(l.A,{vertical:!0,align:"center",children:[(0,j.jsx)(l.A,{className:M,children:t.length}),(0,j.jsxs)(l.A,{className:O,children:["(",a.toFixed(2),"% of Subs)"]})]})})},K="TotalDeclines_card__-vNnE",q="TotalDeclines_dealCount__MY+xE",B="TotalDeclines_dealsGoal__St+b7";const W=function(){const{submittedDeals:e}=(0,c.useContext)(i.r),t=e.filter((e=>"DQ"===(0,D.MH)(e.column_values)[r.zu.deals.stage])),a=e.length>0?t.length/e.length*100:0;return(0,j.jsx)(m.A,{className:K,title:"Total Declines",children:(0,j.jsxs)(l.A,{vertical:!0,align:"center",children:[(0,j.jsx)(l.A,{className:q,children:t.length}),(0,j.jsxs)(l.A,{className:B,children:["(",a.toFixed(2),"% of Subs)"]})]})})};var J=a(1397),U=a.n(J);const V="NewDealsPitched_card__zEEst",X="NewDealsPitched_dealCount__fxMZ6",Z="NewDealsPitched_dealsPercent__ppbAe",$="NewDealsPitched_dealsGoal__Yo+i-";const ee=function(){const{submittedDeals:e,pitchedGoal:t}=(0,c.useContext)(i.r),[a,s]=(0,c.useState)({}),n=e.filter((e=>"v"===(0,D.MH)(e.column_values)[r.zu.deals.pitched]));(0,c.useEffect)((()=>{if(!n)return;const e=null===n||void 0===n?void 0:n.reduce(((e,t)=>{const a=e,s=(0,D.MH)(t.column_values),n=null===s[r.zu.deals.channel]?"None":s[r.zu.deals.channel];return a[n]?a[n]+=1:a[n]=1,a}),{});s(e)}),[e]);const d=e.length>0?n.length/e.length*100:0,o=n.length/t*100;return(0,j.jsx)(m.A,{className:V,title:"New Deals Pitched",children:(0,j.jsxs)(l.A,{justify:"space-around",children:[(0,j.jsxs)(l.A,{vertical:!0,align:"center",children:[(0,j.jsx)(l.A,{className:X,children:n.length}),(0,j.jsx)(l.A,{className:Z,children:"".concat(d.toFixed(2),"% of Deals")}),(0,j.jsxs)(l.A,{className:$,children:["Goal:"," ",o.toFixed(2),"%"]})]}),(0,j.jsx)(l.A,{children:(0,j.jsx)(f,{data:a})})]})})},te="FundedDeals_card__YHQ+X",ae="FundedDeals_dealCount__+YXve",se="FundedDeals_dealsGoal__CCn2A";const ne=function(){const{submittedDeals:e}=(0,c.useContext)(i.r),t=e.filter((e=>e.subitems.find((e=>"Selected"===(0,D.MH)(e.column_values)[r.zu.subItem.status])))),a=e.length>0?t.length/e.length*100:0;return(0,j.jsx)(m.A,{className:te,title:"Funded",children:(0,j.jsxs)(l.A,{vertical:!0,align:"center",children:[(0,j.jsx)(l.A,{className:ae,children:t.length}),(0,j.jsxs)(l.A,{className:se,children:["(",a.toFixed(2),"% of Subs)"]})]})})},le="FundedDealsAmount_card__qgB3J",ie="FundedDealsAmount_dealCount__mqUDs";const ce=function(){const{submittedDeals:e}=(0,c.useContext)(i.r),t=e.reduce(((e,t)=>{let a=e;const s=t.subitems.find((e=>"Selected"===(0,D.MH)(e.column_values)[r.zu.subItem.status]));if(s){const e=(0,D.MH)(s.column_values);a+=Number(e[r.zu.subItem.funding_amount])}return a}),0);return(0,j.jsx)(m.A,{className:le,title:"Funded Amount",children:(0,j.jsx)(l.A,{vertical:!0,align:"center",children:(0,j.jsxs)(l.A,{className:ie,children:["$",(0,D.qC)(t)]})})})};const de=function(){let e;const[t,a]=(0,c.useState)({}),[s,n]=(0,c.useState)([]),[o,_]=(0,c.useState)([]),[m,x]=(0,c.useState)([u()(),u()()]),g=(0,c.useRef)(),f=async e=>{const t=function(e){const t=e.map((e=>{let t=U().mapKeys(e.column_values,"id");t=U().mapValues(t,"text");const a=(0,D.oG)(e.column_values,r.zu.leads.last_lead_assigned),s=(0,D.oG)(e.column_values,r.zu.leads.creation_date),n=(0,D.oG)(e.column_values,r.zu.leads.new_lead_or_touched),l=(0,D.oG)(e.column_values,r.zu.leads.minutes_5),i="Not Touched yet"===t[r.zu.leads.new_lead_or_touched],c="Passed through all options"===t[r.zu.leads.new_lead_or_touched],d=null!==t[r.zu.leads.minutes_5],o="Touched"===t[r.zu.leads.new_lead_or_touched];let h=0;i&&null!==a&&void 0!==a&&a.changed_at&&(h=u()().diff(u()(null===a||void 0===a?void 0:a.changed_at),"seconds"));let _=0;return d?_=u()(null===l||void 0===l?void 0:l.changed_at).diff(u()(null===s||void 0===s?void 0:s.changed_at),"seconds"):o&&(_=u()(null===n||void 0===n?void 0:n.changed_at).diff(u()(null===s||void 0===s?void 0:s.changed_at),"seconds")),{key:e.id,name:e.name,stage:t[r.zu.leads.stage],isNew:i,isAllPassed:c,isAllPassedTimer:d,isTouched:o,reassingTime:h<=300?300-h:0,time:h,queueTime:t[r.zu.leads.time_in_the_que],channel:t[r.zu.leads.channel],timeToRespond:_,assignedTo:t[r.zu.leads.sales_rep]||"-"}}));return U().sortBy(t,"isNew").reverse()}(await(0,d.Hp)(e));n(t)},v=async e=>{const t=await(0,d.Wr)(e);_(t)},A=async()=>{const e=await(0,d.C)();a(e)};return(0,c.useEffect)((()=>(A(),e=h.A.listen("events",A),()=>{e&&e()})),[]),(0,c.useEffect)((()=>{g.current=[u()(),u()()],f(m);const e=setInterval((()=>{f(g.current)}),1e3*r._K.performanceRefetchTime);return()=>{clearInterval(e)}}),[]),(0,c.useEffect)((()=>{v(m);const e=setInterval((()=>{v(g.current)}),1e3*r._K.performanceRefetchTime);return()=>{clearInterval(e)}}),[]),(0,j.jsx)(i.r.Provider,{value:{goalTime:+t[r.zu.metrics.leadGoal],dealGoal:+t[r.zu.metrics.leadSubmissionGoal],pitchedGoal:+t[r.zu.metrics.dealPitchGoal],newLeads:s,submittedDeals:o,dateRange:m,getNewLeadsData:f,getSubmittedDeals:v,handleChangeDates:e=>{x(e),f(e),v(e),g.current=e}},children:(0,j.jsxs)(l.A,{justify:"center",align:"center",vertical:!0,children:[(0,j.jsx)(F,{}),(0,j.jsxs)(l.A,{children:[(0,j.jsx)(l.A,{children:(0,j.jsx)(Q,{})}),(0,j.jsx)(l.A,{children:(0,j.jsx)(Y,{})}),(0,j.jsx)(l.A,{children:(0,j.jsx)(W,{})})]}),(0,j.jsxs)(l.A,{children:[(0,j.jsx)(l.A,{children:(0,j.jsx)(ee,{})}),(0,j.jsx)(l.A,{children:(0,j.jsx)(ne,{})}),(0,j.jsx)(l.A,{children:(0,j.jsx)(ce,{})})]})]})})};const re=function(){return(0,j.jsx)(s.Ay,{theme:{token:{fontFamily:"Poppins"},components:{Layout:{bodyBg:"#E1EFF2",headerBg:"#E1EFF2"}}},children:(0,j.jsxs)(n.A,{style:{padding:"0 8px 24px"},children:[(0,j.jsx)(de,{})," "]})})}}}]);